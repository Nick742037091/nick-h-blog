---
title: 前端模块系统
published: 2025-02-10
description: '系统讲解各个场景下的前端模块'
image: '../../assets/images/articles/前端模块系统/nodejs.png'
tags: ['node.js','webpack','vite']
category: '前端'
lang: 'zh_CN'
---

现在普遍使用的前端模块基本就两种类型：[CommonJS](https://nodejs.org/docs/latest-v16.x/api/modules.html) 和 [ESM](https://nodejs.org/docs/latest-v16.x/api/esm.html)，但是细分到各种场景又会有很多注意事项，让我们梳理一下。


# Node.js

先展示一下 Commonjs 和 ESM 的基本用法。

## Common.js

导出使用 `module.exports` 或 `exports`
```js
// utils.js
// 整体导出为一个对象
module.exports = {
  fun: function() { },
  v1: 'xxxx'
}
// exports 为 module.exports 别名，相当于在 module.exports 导出的对象增加属性
exports.bar = function() { }
```

导入使用 `require`
```js
// 只能导入为完整对象
const utils = require('./utils.js')
//使用导入对象的属性
utils.fun()
console.log('v1', utils.v1)
```

## ESM

导出使用 `export`或`export default`。
```js
// utils.js
// 命名导出函数
export function fun() { }
// 命名导出常量
export const v1 = 'xxx'
// 默认导出。
export default {
  bar: function() { },
  v2: 'yyy'
}
```
:::tip
一个文件只能有一处默认导出，可以有多处命名导出，可以混合命名导出和默认导出
:::

导入使用`import`
```js
// 命名导入
import { fun, v1 } from './utils.js'
// 将所有命名导入合并为一个对象
import * obj from './utils.js'
// 默认导入
import utils from './utils.js'

fun()
console.log('v1', v1)

obj.fun()
console.log('v1', obj.v1)

utils.bar()
console.log('v2', utils.v2)
```
:::tip
支持导入多次，但是不要有重复的命名
:::




